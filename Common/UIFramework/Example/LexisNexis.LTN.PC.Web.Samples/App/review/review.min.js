"use strict";var ReviewResources,Configuration;(function(){angular.module("app",["ngAnimate","ngRoute","ngSanitize","kendo.directives","ui.bootstrap","angular-loading-bar"])})();ReviewResources={Relevance:"Relevance",AssistedReview:"Assisted Review",Fields:"Fields",Control:"Control #",Excerpts:"Excerpts",Excerpt:"Excerpt",Comments:"Comments",DCN:"DCN",FileName:"File Name",ParentId:"ParentId",AllDocs:"All Docs",DocId:"DocId",Attachmt:"Attachmt",Batesmsg:"Batesmsg",EDFolder:"EDFolder",Author:"Author",Categories:"Categories",ThreadId:"ThreadId",Subject:"Subject",NonRelevant:"Non-Relevant",Relevant:"Relevant",more:"more",Add:"Add",Close:"Close",shorttext:80,Document:"Document"},function(){angular.module("app").constant("ERRORS_LIST",{Custom:"Custom",400:"Bad Request",404:"Page Not Found",901:"Unauthorized service call"})}(),function(){function n(n,t){n.decorator("$exceptionHandler",["$delegate","$injector",function(n,t){return function(i,r){n(i,r);var u=t.get("ErrorHandlerService");i.status&&i.status==="Custom "||u.addError(i)}}]);t.decorate(n,["WebApiClientService"])}angular.module("app").config(n);n.$inject=["$provide","WebApiClientServiceErrorDecoratorProvider"]}();Configuration={reviewer:{docSetNavigationAllowed:!0,swapEnabled:!0,zoomEnabled:!0,highlightEnabled:!0,featuresEnabled:!0,splitterPanesConfig:[{collapsible:!1,resizable:!0,size:"70%",min:"50%",contentUrl:"../review/includes/LeftPaneView.html"},{collapsible:!0,resizable:!0,size:"30%",min:"15%",contentUrl:"../review/includes/RightPaneView.html"}],featureTabTemplates:[{title:"Assisted Review",templateUrl:"../review/includes/AssistedReviewTabView.html"},{title:"Fields",templateUrl:"../review/includes/FieldTabView.html"}]}}(function(){angular.module("app").factory("WebApiClientService",["$http","$q",function(n){function i(){angular.forEach(arguments,function(i){t[i]=function(t,r){return r=r||{},n(angular.extend(r,{method:i,url:t,allowRequest:!0}))}})}function r(){angular.forEach(arguments,function(i){t[i]=function(t,r,u){return u=u||{},n(angular.extend(u,{method:i,url:t,data:r,allowRequest:!0}))}})}var t={};return i("get","delete","head","jsonp"),r("post","put","patch"),t}])}()),function(){angular.module("app").provider("WebApiClientServiceErrorDecorator",function(){function n(n,t,i){return angular.extend(function(){var r=n.get("WebApiClientServiceErrorDecorator");return r.call(i,t,arguments)},i)}var t=["$delegate","$injector",function(t,i){for(var r in t)angular.isFunction(t[r])&&(t[r]=n(i,t,t[r]));return t}];return{decorate:function(n,i){angular.forEach(i,function(i){n.decorator(i,t)})},$get:function(n){var t={call:function(i,r,u){var f,e;try{f=i.apply(r,u)}catch(o){n.addError(o)}return e=f&&f.$promise||f,e&&angular.isFunction(e.then)&&angular.isFunction(e["catch"])&&t.async(i,e),f},async:function(t,i){return i["catch"](function(t){t.status&&t.status!=="Custom"&&n.addError(t)}),i}};return t}}})}(),function(){var n=function(){return{controller:function(n){var t=this;t.ErrorHandlerService=n},template:'<div alert ng-repeat="error in ErrorHandlerService.errors track by $index" type="danger" close="ErrorHandlerService.errors.splice($index,1)">{{error}}<\/div>',link:function(n,t,i,r){n.ErrorHandlerService=r.ErrorHandlerService}}};angular.module("app").directive("lnErrorHandler",n)}(),function(){angular.module("app").factory("ErrorHandlerService",["$log","ERRORS_LIST",function(n,t){var i={errors:[],buildErrorMessage:function(i){if(i&&!angular.isUndefined(i.status)){if(i.data&&i.data.ExceptionType){var r=i.data.ExceptionType,u=i.data.Message,f=i.data.ExceptionMessage;i=r+": "+u+"[ "+f+" ]"}i.data&&i.MessageDetail?i=t[i.status]+":"+i.Message+"["+i.MessageDetail+"]":i.data&&i.data.MessageDetail&&(i=t[i.status]+":"+i.data.Message+"["+i.data.MessageDetail+"]");i.message&&(i=t[i.status]+":"+i.message)}else i&&i.Message?i=i.Message:i&&i.message&&(i=i.message);return angular.isString(i)||(i="An unknown error occurred."),n.info("Caught error: "+i),i},get:function(){return i.errors},addError:function(n){i.errors.push(i.buildErrorMessage(n))},clearError:function(n){i.errors.splice(n,1)}};return i}])}(),function(){angular.module("app").directive("lnInputValidation",function(){return{scope:{validations:"=?lnInputValidationSync",asyncValidations:"=?lnInputValidationAsync",patterns:"=?lnInputValidationPatterns",batch:"=?lnInputValidationBatch"},require:"ngModel",link:function(n,t,i,r){i.lnInputValidationBatch&&(r.$validators.lnBatchValidations=function(t){var i=!0;return angular.forEach(n.batch,function(n){i=i&&n.test(t)}),i});i.lnInputValidationPatterns&&angular.forEach(n.patterns,function(n,t){r.$validators[t]=function(t,i){var r=t||i;return n.test(r)}});i.lnInputValidationSync&&angular.forEach(n.validations,function(n,t){r.$validators[t]=function(t,i){var r=t||i;return n(r)}});i.lnInputValidationAsync&&angular.forEach(n.asyncValidations,function(n,t){r.$asyncValidators[t]=function(t,i){var r=t||i;return n(r)}})}}})}(),function(){var n=function(n){n.when("/",{controller:"ReviewController",templateUrl:"/app/review/reviewer/ReviewView.html"})};angular.module("app").config(n);n.$inject=["$routeProvider"]}(),function(){function n(){return}angular.module("app").run(n);n.$inject=["$rootScope","$templateCache"]}(),function(){var n,t;n=function(){var n;n=this;n.reviewerConfig={}};t=angular.module("app");t.controller("ReviewController",n);n.$inject=[]}(),function(){var n,t;t=function(){return{restrict:"A",scope:{data:"=?lnHighlighterData",highlightIndex:"=?lnHighlighterIndex"},template:'<div ng-bind-html="data.content" class="text-justify v-padding-bottom-30"><\/div>',link:function(n,t){n.$watch("highlightIndex",function(n,i){var r;n!==i&&n&&(r=t.find(".hits"),r.eq(i-1).removeClass("active"),r.eq(n-1).addClass("active"))})}}};n=angular.module("app");n.directive("lnHighlighter",t)}(),function(){var n,t;t=function(){return{restrict:"EA",scope:{totalItems:"=lnNavigatorTotal",label:"@lnNavigatorLabel",update:"=lnNavigatorUpdate",reset:"=?lnNavigatorReset",isAdvanced:"=?lnNavigatorAdvanced"},templateUrl:"/App/common/directives/navigatorDirectiveView.html",link:function(n,t){var r,i,u;r=n.isAdvanced?280:155;n.$watch("totalItems",function(n,i){if(n!==i){var f,e,u;f=window.isNaN(parseInt(n,10))?2:n.toString().length;f<1&&(f=1);e=t.parent().width();u=r+6*f;u=u<e?u:e;t.css("width",u+"px")}});n.currentRecordNumber=1;u=function(t){if(t<1||t>n.totalItems){var i=new Error;i.name="Validation";i.message="Please provide a value between 0 and "+n.totalItems;throw i;}};i=function(t){u(t);t>n.totalItems||t<0||(n.currentRecordNumber=t,n.update(t))};n.reset&&n.$watch("reset.value",function(t){t&&(n.currentRecordNumber=1,n.reset.value=!1)});n.next=function(){n.currentRecordNumber<n.totalItems&&i(n.currentRecordNumber+1)};n.last=function(){n.currentRecordNumber<n.totalItems&&i(n.totalItems)};n.prev=function(){n.currentRecordNumber<=n.totalItems&&n.currentRecordNumber>1&&i(n.currentRecordNumber-1)};n.first=function(){n.currentRecordNumber<=n.totalItems&&n.currentRecordNumber>1&&i(1)};n.disableNext=function(){return n.currentRecordNumber===n.totalItems};n.disablePrev=function(){return n.currentRecordNumber===1};n.submitForm=function(t){var i;i=t.keyCode;i===13&&(n.currentRecordNumber>n.totalItems||isNaN(n.currentRecordNumber)||n.update(n.currentRecordNumber))}}}};n=angular.module("app");n.directive("lnNavigator",t)}(),function(){var n;n=function(n){var t;return t="/api/reviewset",{request:function(i){var r;return r=i?t+"/:"+i:t,n.get(r)},addComments:function(i,r){return n.put(t+"/:"+i,r)},deleteComment:function(i,r){return n["delete"](t+"/:"+i(+"/"+r))},addExcerpts:function(i,r){return n.put(t+"/:"+i,r)},deleteExcerpts:function(i,r){return n["delete"](t+"/:"+i,r)}}};angular.module("app").factory("DocumentSetModelFactory",n);n.$inject=["WebApiClientService"]}(),function(){var n=angular.module("app");n.constant("ReviewerConfiguration",{service:"DocumentSetModelFactory",layout:{MODE_LEFT:"MODE_LEFT",MODE_RIGHT:"MODE_RIGHT"},relevance:{NONE:"NONE",NONRELEVANT:"NONRELEVANT",RELEVANT:"RELEVANT"},widgets:{enabled:!0,list:["assistedReview","fields"]}});n.constant("ReviewResources",ReviewResources)}(),function(){var n=angular.module("app");n.constant("WidgetsDefinition",{assistedReview:{title:"Assisted Review",templateUrl:"/App/common/component/widgets/assistedReviewView.html"},fields:{title:"Fields",templateUrl:"/App/common/component/widgets/fieldsView.html"}})}(),function(){var n=function(n,t,i){var r,u,f,e,o,s,h;return o=t.get(n.service),r={comments:[],excerpts:[]},f=function(n){var t;return t=i.defer(),o.request(n).success(function(n){return t.resolve(n)}).error(function(n){return t.reject(n)}),t.promise},s=function(n){r.comments=n},h=function(n){r.excerpts=n},u=function(){return r.comments},e=function(){return r.excerpts},{getDocumentSet:f,getComments:u,getExcerpts:e,setComments:s,setExcerpts:h}},t=angular.module("app");t.service("ReviewerDataService",n);n.$inject=["ReviewerConfiguration","$injector","$q"]}(),function(){var n=function(n,t,i,r){var o,c,f,u,l,a,s,e,v,h;if(u=this,u.localized=r,u.currentDocument={},u.currentDocumentIndex=1,u.highlightIndex=1,u.resetNavigator={value:!1},l=[{collapsible:!0,resizable:!0,size:"30%",min:"20%",scrollable:!1},{collapsible:!1,resizable:!0,size:"70%",min:"30%",scrollable:!1}],a=[{collapsible:!1,resizable:!0,size:"70%",min:"30%",scrollable:!1},{collapsible:!0,resizable:!0,size:"30%",min:"20%",scrollable:!1}],s=function(n){var t=window.setTimeout;t(function(){var i=n.element,r=i.find(".document-viewer").innerHeight(),u=150,f=$("html",window.document).eq(0).height(),t=f-u;r>t&&(t=r+u);i.height(t);i.find(".k-pane").height(t);i.find(".k-splitbar").height(t)},100)},u.splitterTabLeftOptions={orientation:"horizontal",panes:l,resize:function(n){n.sender&&s(n.sender)},rebind:function(n){n.sender&&n.sender.resize()}},u.splitterTabRightOptions={orientation:"horizontal",panes:a,resize:function(n){n.sender&&s(n.sender)},rebind:function(n){n.sender&&n.sender.resize()}},u.zoomOptions=[{key:"font-50",value:"50"},{key:"font-75",value:"75"},{key:"font-100",value:"100"},{key:"font-125",value:"125"},{key:"font-150",value:"150"},{key:"font-175",value:"175"},{key:"font-200",value:"200"}],u.zoomed="font-100",u.resetZoom=function(){u.zoomed="font-100"},u.isZoomedIn=function(){return parseInt(u.zoomed.substr(5),10)>100},u.isZoomedDefault=function(){return u.zoomed==="font-100"},f=t.layout,u.selectedLayoutMode=f.MODE_RIGHT,u.swapLayoutMode=function(n){u.selectedLayoutMode=f[n]},u.isLayoutModeLeft=function(){return u.selectedLayoutMode===f.MODE_LEFT},u.isLayoutModeRight=function(){return u.selectedLayoutMode===f.MODE_RIGHT},u.isWidgetsEnabled=t.widgets.enabled,u.isWidgetsEnabled)for(u.widgets=[],h=t.widgets.list,e=0,v=h.length;e<v;e=e+1)c=h[e],u.widgets.push(i[c]);o=function(){n.getDocumentSet().then(function(t){var i;return i=u.currentDocumentIndex-1,u.totalDocuments=t[i].totaldocs,u.currentDocument=t[i],u.totalHits=t[i].totalhits,n.setComments(t[i].comments),n.setExcerpts(t[i].excerpts)})};o();u.updateDocument=function(n){u.currentDocumentIndex=n;o(n);u.resetHitNavigator.value=!0;u.highlightIndex=1};u.updateHit=function(n){u.highlightIndex=n};u.resetHitNavigator={value:!0}},t=angular.module("app");t.controller("ReviewerDirectiveController",n);n.$inject=["ReviewerDataService","ReviewerConfiguration","WidgetsDefinition","ReviewResources"]}(),function(){var n=function(){return{restrict:"EA",priority:1e3,terminal:!0,controller:"ReviewerDirectiveController",controllerAs:"ReviewerDirectiveController",templateUrl:"/App/common/component/reviewer/ReviewerDirectiveView.html"}},t=angular.module("app");t.directive("lnReviewer",n)}(),function(){var n=function(n,t,i,r){var e,f,u;u=this;u.localized=r;u.excerptStatus={open:!1};u.commentStatus={open:!1};f=i.relevance;u.selectedRelevance=f.NONE;u.isRelevant=function(){return u.selectedRelevance===f.RELEVANT};u.isNonRelevant=function(){return u.selectedRelevance===f.NONRELEVANT};u.isNone=function(){return u.selectedRelevance===f.NONE};u.isExampleDocument=!1;u.makeDocumentExample=function(){return u.isExampleDocument=!0,!1};u.makeDocumentNotExample=function(){return u.isExampleDocument=!1,!1};u.excerpts=t.getExcerpts();n.$watch(function(){return t.getExcerpts()},function(n,t){n!==null&&n!==t&&(u.excerpts=n)});e=function(){var n;return n="",window.getSelection!=="undefined"?n=window.getSelection().toString():document.selection!==null&&document.selection.type==="Text"&&(n=document.selection.createRange().text),n};u.addExcerpts=function(){var i,n;if(i={},i.text=e(),i.type=u.selectedRelevance,i.type===""||i.type===null){n=new Error;n.name="Validation";n.message="Please select Excerpt type";throw n;}if(i.text===""){n=new Error;n.name="Validation";n.message="Please select Excerpt text";throw n;}return u.excerpts.unshift(i),t.setExcerpts(u.excerpts),u.excerptStatus.open=!0,!1};u.removeExcerpts=function(n){u.excerpts.splice(n,1);t.setExcerpts(u.excerpts)};u.comments=t.getComments();n.$watch(function(){return t.getComments()},function(n,t){n!==null&&n!==t&&(u.comments=n)});u.commentItem={text:""};u.addComments=function(n){var r,i;if(r={userId:"johndox",text:n.text},r.text===null){i=new Error;i.name="Validation";i.message="Please Provide Comment";throw i;}u.comments.unshift(r);t.setComments(u.comments);u.commentItem.text=""};u.removeComments=function(n){u.comments.splice(n,1);t.setComments(u.comments)}},t=angular.module("app");t.controller("AssistedReviewController",n);n.$inject=["$scope","ReviewerDataService","ReviewerConfiguration","ReviewResources"]}(),function(){angular.module("app").directive("ngTextTruncate",function(n,t,i){return{restrict:"A",scope:{text:"=ngTextTruncate",charsThreshould:"@ngTtCharsThreshold",wordsThreshould:"@ngTtWordsThreshold",customMoreLabel:"@ngTtMoreLabel",customLessLabel:"@ngTtLessLabel"},controller:function(n,t,i){n.toggleShow=function(){n.open=!n.open};n.useToggling=i.ngTtNoToggling===undefined},link:function(r,u){r.open=!1;n.failIfWrongThreshouldConfig(r.charsThreshould,r.wordsThreshould);var f=parseInt(r.charsThreshould,10),e=parseInt(r.wordsThreshould,10);r.$watch("text",function(){u.empty();f?r.text&&t.truncationApplies(r,f)?t.applyTruncation(f,r,u):u.append(r.text):r.text&&i.truncationApplies(r,e)?i.applyTruncation(e,r,u):u.append(r.text)})}}}).factory("ValidationServices",function(){return{failIfWrongThreshouldConfig:function(n,t){if(!n&&!t||n&&t)throw"You must specify one, and only one, type of threshould (chars or words)";}}}).factory("CharBasedTruncation",function(n){return{truncationApplies:function(n,t){return n.text.length>t},applyTruncation:function(t,i,r){if(i.useToggling){var u=angular.element("<span>"+i.text.substr(0,t)+"<span ng-show='!open'>...<\/span><span class='btn-link ngTruncateToggleText' ng-click='toggleShow()'ng-show='!open'> "+(i.customMoreLabel||"More")+"<\/span><span ng-show='open'>"+i.text.substring(t)+"<span class='btn-link ngTruncateToggleText'ng-click='toggleShow()'> "+(i.customLessLabel||"Less")+"<\/span><\/span><\/span>");n(u)(i);r.append(u)}else r.append(i.text.substr(0,t)+"...")}}}).factory("WordBasedTruncation",function(n){return{truncationApplies:function(n,t){return n.text.split(" ").length>t},applyTruncation:function(t,i,r){var u=i.text.split(" "),f;i.useToggling?(f=angular.element("<span>"+u.slice(0,t).join(" ")+" <span ng-show='!open'>...<\/span><span class='btn-link ngTruncateToggleText' ng-click='toggleShow()'ng-show='!open'> "+(i.customMoreLabel||"More")+"<\/span><span ng-show='open'>"+u.slice(t,u.length).join(" ")+"<span class='btn-link ngTruncateToggleText'ng-click='toggleShow()'> "+(i.customLessLabel||"Less")+"<\/span><\/span><\/span>"),n(f)(i),r.append(f)):r.append(u.slice(0,t).join(" ")+"...")}}})}();
//# sourceMappingURL=review.min.js.map
